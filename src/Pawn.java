class Pawn extends Piece{
    public Pawn(boolean white) {
        // Конструктор, который принимает цвет фигуры: true — белая, false — чёрная.
        super(white);
        // Вызов конструктора родительского класса Piece, чтобы сохранить цвет в поле white.
    }

    @Override

    boolean canMove(Board board, Spot start, Spot end) {
        // Метод проверяет, может ли пешка сделать ход с клетки start на клетку end на данной доске board.

        if (sameColor(start.getPiece(), end.getPiece())) return false;
        // Если на конечной клетке стоит фигура того же цвета, что и на начальной, ход запрещён.

        int dir = white ? -1 : 1;
        // Направление движения по оси Y: для белых -1 (вверх по доске), для чёрных +1 (вниз).

        int startRank = white ? 6 : 1;
        // Начальный ряд пешек: для белых это 6‑я строка массива (второй снизу), для чёрных — 1‑я (второй сверху).

        int dx = end.getX() - start.getX();
        // Горизонтальное смещение: насколько изменится координата X (столбец).

        int dy = end.getY() - start.getY();
        // Вертикальное смещение: насколько изменится координата Y (ряд).

        // ход вперёд на 1
        if (dx == 0 && dy == dir && end.getPiece() == null) {
            // Если пешка движется строго вперёд на 1 клетку и конечная клетка свободна,
            return true;
            // такой ход считается корректным.
        }

        // ход вперёд на 2 с начальной позиции
        if (dx == 0 && dy == 2 * dir && start.getY() == startRank) {
            // Если пешка движется строго вперёд на 2 клетки и стоит на своём стартовом ряду,
            Spot mid = board.getBox(start.getX(), start.getY() + dir);
            // берётся клетка, которая находится между начальной и конечной (через одну).
            if (mid.getPiece() == null && end.getPiece() == null) return true;
            // Ход разрешён, только если и промежуточная клетка, и конечная клетка свободны.
        }

        // взятие по диагонали
        if (Math.abs(dx) == 1 && dy == dir && end.getPiece() != null &&
                // Пешка смещается по X на 1 клетку в сторону, по Y — вперёд на 1, и на конечной клетке есть фигура,
                end.getPiece().white != this.white) {
            // причём эта фигура другого цвета (противник),
            return true;
            // такой ход считается взятием по диагонали и разрешён.
        }

        return false;
        // Во всех остальных случаях ход пешки считается некорректным.
    }
}
